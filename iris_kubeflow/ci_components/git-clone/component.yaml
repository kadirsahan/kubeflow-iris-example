name: Git Clone
description: Clones a specific commit from a Git repository.

inputs:
  - {name: repo_url, type: String, description: 'The URL of the Git repository.'}
  - {name: commit_sha, type: String, description: 'The specific commit SHA to clone.'}
outputs:
  - {name: workspace, type: Artifact, description: 'The cloned repository workspace.'}

implementation:
  container:
    image: alpine/git:v2.24.4
    command:
      - sh
      - -c
      - |
        set -e
        git clone "$0" "$2"
        cd "$2"
        git reset --hard "$1"
    args:
      - {inputValue: repo_url}
      - {inputValue: commit_sha}
      - {outputPath: workspace}
